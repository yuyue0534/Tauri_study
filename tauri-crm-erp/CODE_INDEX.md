# å®Œæ•´æºä»£ç æ–‡ä»¶æ¸…å•

## ğŸ“‹ è¯´æ˜

æœ¬æ–‡æ¡£åˆ—å‡ºäº† CRM/ERP ç³»ç»Ÿçš„æ‰€æœ‰æºä»£ç æ–‡ä»¶ã€‚ç”±äºå®Œæ•´é¡¹ç›®åŒ…å« 100+ ä¸ªæ–‡ä»¶,æ•°ä¸‡è¡Œä»£ç ,æœ¬æ–‡æ¡£æä¾›:

1. **å®Œæ•´çš„æ–‡ä»¶æ¸…å•** - æ‰€æœ‰éœ€è¦åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨
2. **æ ¸å¿ƒæ–‡ä»¶ä»£ç ** - å…³é”®æ¨¡å—çš„å®Œæ•´å®ç°ä»£ç 
3. **ä»£ç ç”ŸæˆæŒ‡å—** - å¦‚ä½•å¿«é€Ÿç”Ÿæˆå…¶ä»–è¾…åŠ©æ–‡ä»¶

---

## ğŸ“ å‰ç«¯ React ä»£ç æ–‡ä»¶ (å…± 60+ æ–‡ä»¶)

### å…¥å£æ–‡ä»¶ (3 ä¸ª)
- [ ] `src/main.jsx` - React åº”ç”¨å…¥å£
- [ ] `src/App.jsx` - æ ¹ç»„ä»¶
- [ ] `src/index.css` - å…¨å±€æ ·å¼

### è·¯ç”±é…ç½® (2 ä¸ª)
- [ ] `src/routes/index.jsx` - è·¯ç”±ä¸»æ–‡ä»¶
- [ ] `src/routes/routeConfig.js` - è·¯ç”±é…ç½®

### çŠ¶æ€ç®¡ç† (6 ä¸ª)
- [ ] `src/store/index.js` - Store å¯¼å‡º
- [ ] `src/store/authStore.js` - è®¤è¯çŠ¶æ€
- [ ] `src/store/customerStore.js` - å®¢æˆ·æ•°æ®
- [ ] `src/store/salesStore.js` - é”€å”®æ•°æ®
- [ ] `src/store/inventoryStore.js` - åº“å­˜æ•°æ®
- [ ] `src/store/settingsStore.js` - ç³»ç»Ÿè®¾ç½®

### API æœåŠ¡å±‚ (7 ä¸ª)
- [ ] `src/services/api.js` - Tauri Invoke å°è£…
- [ ] `src/services/authService.js` - è®¤è¯ API
- [ ] `src/services/customerService.js` - å®¢æˆ· API
- [ ] `src/services/salesService.js` - é”€å”® API
- [ ] `src/services/inventoryService.js` - åº“å­˜ API
- [ ] `src/services/analyticsService.js` - ç»Ÿè®¡ API
- [ ] `src/services/systemService.js` - ç³»ç»Ÿ API

### å·¥å…·å‡½æ•° (5 ä¸ª)
- [ ] `src/utils/constants.js` - å¸¸é‡å®šä¹‰
- [ ] `src/utils/format.js` - æ ¼å¼åŒ–å·¥å…·
- [ ] `src/utils/validation.js` - è¡¨å•éªŒè¯
- [ ] `src/utils/storage.js` - æœ¬åœ°å­˜å‚¨
- [ ] `src/utils/permission.js` - æƒé™åˆ¤æ–­

### è‡ªå®šä¹‰ Hooks (4 ä¸ª)
- [ ] `src/hooks/useAuth.js` - è®¤è¯ Hook
- [ ] `src/hooks/usePermission.js` - æƒé™ Hook
- [ ] `src/hooks/useTable.js` - è¡¨æ ¼ Hook
- [ ] `src/hooks/useForm.js` - è¡¨å• Hook

### å…¬å…±ç»„ä»¶ (10 ä¸ª)
- [ ] `src/components/common/Button/index.jsx` - æŒ‰é’®
- [ ] `src/components/common/Input/index.jsx` - è¾“å…¥æ¡†
- [ ] `src/components/common/Select/index.jsx` - ä¸‹æ‹‰é€‰æ‹©
- [ ] `src/components/common/Modal/index.jsx` - å¼¹çª—
- [ ] `src/components/common/Table/index.jsx` - æ•°æ®è¡¨æ ¼
- [ ] `src/components/common/Pagination/index.jsx` - åˆ†é¡µ
- [ ] `src/components/common/DatePicker/index.jsx` - æ—¥æœŸé€‰æ‹©
- [ ] `src/components/common/Loading/index.jsx` - åŠ è½½åŠ¨ç”»
- [ ] `src/components/common/Toast/index.jsx` - æ¶ˆæ¯æç¤º
- [ ] `src/components/common/Card/index.jsx` - å¡ç‰‡å®¹å™¨

### å¸ƒå±€ç»„ä»¶ (4 ä¸ª)
- [ ] `src/components/layout/AuthLayout/index.jsx` - è®¤è¯å¸ƒå±€
- [ ] `src/components/layout/MainLayout/index.jsx` - ä¸»å¸ƒå±€
- [ ] `src/components/layout/MainLayout/Sidebar.jsx` - ä¾§è¾¹æ 
- [ ] `src/components/layout/MainLayout/Header.jsx` - é¡¶éƒ¨æ 

### ä¸šåŠ¡ç»„ä»¶ (20+ ä¸ª)
#### å®¢æˆ·ç®¡ç†
- [ ] `src/components/customer/CustomerList/index.jsx`
- [ ] `src/components/customer/CustomerForm/index.jsx`
- [ ] `src/components/customer/CustomerDetail/index.jsx`
- [ ] `src/components/customer/FollowUpList/index.jsx`
- [ ] `src/components/customer/FollowUpForm/index.jsx`

#### é”€å”®ç®¡ç†
- [ ] `src/components/sales/QuoteList/index.jsx`
- [ ] `src/components/sales/QuoteForm/index.jsx`
- [ ] `src/components/sales/OrderList/index.jsx`
- [ ] `src/components/sales/OrderForm/index.jsx`
- [ ] `src/components/sales/OrderDetail/index.jsx`

#### åº“å­˜ç®¡ç†
- [ ] `src/components/inventory/ProductList/index.jsx`
- [ ] `src/components/inventory/ProductForm/index.jsx`
- [ ] `src/components/inventory/StockMovementList/index.jsx`
- [ ] `src/components/inventory/StockWarning/index.jsx`

#### æ•°æ®ç»Ÿè®¡
- [ ] `src/components/analytics/Dashboard/index.jsx`
- [ ] `src/components/analytics/SalesChart/index.jsx`
- [ ] `src/components/analytics/CustomerChart/index.jsx`

#### ç³»ç»Ÿè®¾ç½®
- [ ] `src/components/settings/UserManagement/index.jsx`
- [ ] `src/components/settings/SystemConfig/index.jsx`
- [ ] `src/components/settings/SystemLogs/index.jsx`

### é¡µé¢ç»„ä»¶ (8 ä¸ª)
- [ ] `src/pages/Login/index.jsx` - ç™»å½•é¡µ
- [ ] `src/pages/Dashboard/index.jsx` - ä»ªè¡¨ç›˜
- [ ] `src/pages/Customers/index.jsx` - å®¢æˆ·ç®¡ç†
- [ ] `src/pages/Sales/index.jsx` - é”€å”®ç®¡ç†
- [ ] `src/pages/Inventory/index.jsx` - åº“å­˜ç®¡ç†
- [ ] `src/pages/Analytics/index.jsx` - æ•°æ®ç»Ÿè®¡
- [ ] `src/pages/Settings/index.jsx` - ç³»ç»Ÿè®¾ç½®
- [ ] `src/pages/NotFound/index.jsx` - 404 é¡µé¢

---

## ğŸ¦€ åç«¯ Rust ä»£ç æ–‡ä»¶ (å…± 40+ æ–‡ä»¶)

### å…¥å£æ–‡ä»¶ (2 ä¸ª)
- [ ] `src-tauri/src/main.rs` - Tauri å…¥å£
- [ ] `src-tauri/src/lib.rs` - åº“æ–‡ä»¶

### æ•°æ®æ¨¡å‹ (7 ä¸ª)
- [ ] `src-tauri/src/models/mod.rs`
- [ ] `src-tauri/src/models/common.rs` - å…¬å…±æ¨¡å‹
- [ ] `src-tauri/src/models/user.rs` - ç”¨æˆ·æ¨¡å‹
- [ ] `src-tauri/src/models/customer.rs` - å®¢æˆ·æ¨¡å‹
- [ ] `src-tauri/src/models/product.rs` - äº§å“æ¨¡å‹
- [ ] `src-tauri/src/models/order.rs` - è®¢å•æ¨¡å‹
- [ ] `src-tauri/src/models/stock.rs` - åº“å­˜æ¨¡å‹

### æ•°æ®è®¿é—®å±‚ (7 ä¸ª)
- [ ] `src-tauri/src/repositories/mod.rs`
- [ ] `src-tauri/src/repositories/user_repo.rs`
- [ ] `src-tauri/src/repositories/customer_repo.rs`
- [ ] `src-tauri/src/repositories/product_repo.rs`
- [ ] `src-tauri/src/repositories/order_repo.rs`
- [ ] `src-tauri/src/repositories/stock_repo.rs`
- [ ] `src-tauri/src/repositories/log_repo.rs`

### ä¸šåŠ¡é€»è¾‘å±‚ (6 ä¸ª)
- [ ] `src-tauri/src/services/mod.rs`
- [ ] `src-tauri/src/services/auth_service.rs`
- [ ] `src-tauri/src/services/customer_service.rs`
- [ ] `src-tauri/src/services/sales_service.rs`
- [ ] `src-tauri/src/services/inventory_service.rs`
- [ ] `src-tauri/src/services/analytics_service.rs`

### å‘½ä»¤å±‚ (7 ä¸ª)
- [ ] `src-tauri/src/commands/mod.rs`
- [ ] `src-tauri/src/commands/auth.rs`
- [ ] `src-tauri/src/commands/customer.rs`
- [ ] `src-tauri/src/commands/sales.rs`
- [ ] `src-tauri/src/commands/inventory.rs`
- [ ] `src-tauri/src/commands/analytics.rs`
- [ ] `src-tauri/src/commands/system.rs`

### æ•°æ®åº“ç®¡ç† (3 ä¸ª)
- [ ] `src-tauri/src/database/mod.rs`
- [ ] `src-tauri/src/database/connection.rs`
- [ ] `src-tauri/src/database/migrations.rs`

### å·¥å…·å‡½æ•° (5 ä¸ª)
- [ ] `src-tauri/src/utils/mod.rs`
- [ ] `src-tauri/src/utils/crypto.rs` - å¯†ç åŠ å¯†
- [ ] `src-tauri/src/utils/file.rs` - æ–‡ä»¶æ“ä½œ
- [ ] `src-tauri/src/utils/datetime.rs` - æ—¥æœŸå¤„ç†
- [ ] `src-tauri/src/utils/error.rs` - é”™è¯¯å¤„ç†

---

## ğŸ¯ æ ¸å¿ƒä»£ç å®ç°

ä»¥ä¸‹æ˜¯æœ€å…³é”®çš„æ ¸å¿ƒæ–‡ä»¶çš„å®Œæ•´ä»£ç å®ç°ã€‚

### 1. Rust ä¸»å…¥å£æ–‡ä»¶

**æ–‡ä»¶**: `src-tauri/src/main.rs`

```rust
// Prevents additional console window on Windows in release
#![cfg_attr(not(debug_assertions), windows_subsystem = "windows")]

mod commands;
mod database;
mod models;
mod repositories;
mod services;
mod utils;

use database::connection::init_database;
use std::sync::Mutex;
use tauri::Manager;

// å…¨å±€çŠ¶æ€ç®¡ç†
pub struct AppState {
    pub db_pool: Mutex<r2d2::Pool<r2d2_sqlite::SqliteConnectionManager>>,
}

fn main() {
    // åˆå§‹åŒ–æ—¥å¿—
    env_logger::init();

    tauri::Builder::default()
        .setup(|app| {
            // åˆå§‹åŒ–æ•°æ®åº“
            let app_dir = app.path().app_data_dir().expect("Failed to get app data dir");
            std::fs::create_dir_all(&app_dir).expect("Failed to create app data dir");
            
            let db_path = app_dir.join("crm_erp.db");
            let pool = init_database(&db_path.to_string_lossy())
                .expect("Failed to initialize database");

            // è®¾ç½®å…¨å±€çŠ¶æ€
            app.manage(AppState {
                db_pool: Mutex::new(pool),
            });

            log::info!("Application started successfully");
            Ok(())
        })
        .plugin(tauri_plugin_shell::init())
        .invoke_handler(tauri::generate_handler![
            // è®¤è¯å‘½ä»¤
            commands::auth::login,
            commands::auth::logout,
            commands::auth::get_current_user,
            commands::auth::change_password,
            // å®¢æˆ·å‘½ä»¤
            commands::customer::get_customers,
            commands::customer::get_customer_by_id,
            commands::customer::create_customer,
            commands::customer::update_customer,
            commands::customer::delete_customer,
            commands::customer::get_followups,
            commands::customer::create_followup,
            // é”€å”®å‘½ä»¤
            commands::sales::get_quotes,
            commands::sales::create_quote,
            commands::sales::get_orders,
            commands::sales::create_order,
            commands::sales::update_order_status,
            commands::sales::create_payment,
            // åº“å­˜å‘½ä»¤
            commands::inventory::get_products,
            commands::inventory::get_product_by_id,
            commands::inventory::create_product,
            commands::inventory::update_product,
            commands::inventory::delete_product,
            commands::inventory::update_stock,
            commands::inventory::get_stock_warnings,
            commands::inventory::get_stock_movements,
            // ç»Ÿè®¡å‘½ä»¤
            commands::analytics::get_sales_statistics,
            commands::analytics::get_customer_distribution,
            commands::analytics::export_report,
            // ç³»ç»Ÿå‘½ä»¤
            commands::system::get_config,
            commands::system::update_config,
            commands::system::get_logs,
            commands::system::backup_database,
            commands::system::restore_database,
        ])
        .run(tauri::generate_context!())
        .expect("Error while running Tauri application");
}
```

### 2. æ•°æ®åº“è¿æ¥æ± 

**æ–‡ä»¶**: `src-tauri/src/database/connection.rs`

```rust
use anyhow::{Context, Result};
use r2d2::Pool;
use r2d2_sqlite::SqliteConnectionManager;
use rusqlite::Connection;
use std::path::Path;

/// åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± 
pub fn init_database(db_path: &str) -> Result<Pool<SqliteConnectionManager>> {
    log::info!("Initializing database at: {}", db_path);

    // æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
    let db_exists = Path::new(db_path).exists();

    // åˆ›å»ºè¿æ¥ç®¡ç†å™¨
    let manager = SqliteConnectionManager::file(db_path);
    
    // åˆ›å»ºè¿æ¥æ± 
    let pool = Pool::builder()
        .max_size(10)
        .build(manager)
        .context("Failed to create database pool")?;

    // å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨,æ‰§è¡Œåˆå§‹åŒ–
    if !db_exists {
        log::info!("Database does not exist, creating tables...");
        let conn = pool.get().context("Failed to get database connection")?;
        init_schema(&conn)?;
        log::info("Database initialized successfully");
    }

    Ok(pool)
}

/// åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
fn init_schema(conn: &Connection) -> Result<()> {
    // è¯»å–å¹¶æ‰§è¡Œå»ºè¡¨ SQL
    let schema_sql = include_str!("../../../database/schema.sql");
    
    conn.execute_batch(schema_sql)
        .context("Failed to execute schema SQL")?;

    Ok(())
}

/// è·å–æ•°æ®åº“è¿æ¥
pub fn get_connection(
    pool: &Pool<SqliteConnectionManager>,
) -> Result<r2d2::PooledConnection<SqliteConnectionManager>> {
    pool.get().context("Failed to get database connection from pool")
}
```

### 3. React ä¸»å…¥å£

**æ–‡ä»¶**: `src/main.jsx`

```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

**æ–‡ä»¶**: `src/App.jsx`

```jsx
import React from 'react';
import { BrowserRouter } from 'react-router-dom';
import AppRouter from './routes';

function App() {
  return (
    <BrowserRouter>
      <AppRouter />
    </BrowserRouter>
  );
}

export default App;
```

**æ–‡ä»¶**: `src/index.css`

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* å…¨å±€æ ·å¼ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#root {
  width: 100%;
  height: 100vh;
  overflow: hidden;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* æš—é»‘æ¨¡å¼æ»šåŠ¨æ¡ */
.dark ::-webkit-scrollbar-thumb {
  background: #475569;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}
```

### 4. API æœåŠ¡å°è£…

**æ–‡ä»¶**: `src/services/api.js`

```javascript
import { invoke } from '@tauri-apps/api/core';

/**
 * Tauri Invoke å°è£…
 * ç»Ÿä¸€å¤„ç† API è°ƒç”¨å’Œé”™è¯¯
 */
class ApiClient {
  /**
   * è°ƒç”¨ Tauri å‘½ä»¤
   * @param {string} command - å‘½ä»¤åç§°
   * @param {object} args - å‘½ä»¤å‚æ•°
   * @returns {Promise<any>} è¿”å›æ•°æ®
   */
  async call(command, args = {}) {
    try {
      const response = await invoke(command, args);
      
      // æ£€æŸ¥å“åº”æ ¼å¼
      if (response && typeof response === 'object') {
        if (response.success === false) {
          throw new Error(response.error || 'æ“ä½œå¤±è´¥');
        }
        return response.data !== undefined ? response.data : response;
      }
      
      return response;
    } catch (error) {
      console.error(`API Error [${command}]:`, error);
      throw error;
    }
  }

  /**
   * GET è¯·æ±‚å°è£…
   */
  async get(command, params = {}) {
    return this.call(command, params);
  }

  /**
   * POST è¯·æ±‚å°è£…
   */
  async post(command, data = {}) {
    return this.call(command, data);
  }

  /**
   * PUT è¯·æ±‚å°è£…
   */
  async put(command, data = {}) {
    return this.call(command, data);
  }

  /**
   * DELETE è¯·æ±‚å°è£…
   */
  async delete(command, params = {}) {
    return this.call(command, params);
  }
}

// å¯¼å‡ºå•ä¾‹
export default new ApiClient();
```

---

## ğŸš€ å¿«é€Ÿä»£ç ç”Ÿæˆ

### ä½¿ç”¨è„šæœ¬ç”ŸæˆåŸºç¡€æ–‡ä»¶ç»“æ„

åˆ›å»º `scripts/generate-structure.sh`:

```bash
#!/bin/bash

# åˆ›å»ºå‰ç«¯ç›®å½•ç»“æ„
mkdir -p src/{components/{common,layout,customer,sales,inventory,analytics,settings},pages,store,services,utils,hooks,routes,assets/{icons,images},styles}

# åˆ›å»ºåç«¯ç›®å½•ç»“æ„
mkdir -p src-tauri/src/{commands,services,repositories,models,database,utils}

# åˆ›å»ºå…¶ä»–ç›®å½•
mkdir -p database docs/screenshots public

echo "âœ… ç›®å½•ç»“æ„åˆ›å»ºå®Œæˆ!"
```

è¿è¡Œ:
```bash
chmod +x scripts/generate-structure.sh
./scripts/generate-structure.sh
```

---

## ğŸ“ åç»­æ­¥éª¤

1. **ä¸‹è½½å®Œæ•´ä»£ç åŒ…** - ä»é¡¹ç›®ä»“åº“è·å–æ‰€æœ‰æºæ–‡ä»¶
2. **é˜…è¯»æ¶æ„æ–‡æ¡£** - ç†è§£ç³»ç»Ÿè®¾è®¡å’Œæ¨¡å—åˆ’åˆ†
3. **é…ç½®å¼€å‘ç¯å¢ƒ** - æŒ‰ç…§éƒ¨ç½²æŒ‡å—å®‰è£…ä¾èµ–
4. **è¿è¡Œå¼€å‘æœåŠ¡** - å¯åŠ¨é¡¹ç›®è¿›è¡Œå¼€å‘è°ƒè¯•
5. **è‡ªå®šä¹‰æ‰©å±•** - æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ·»åŠ æ–°åŠŸèƒ½

---

## âš ï¸ é‡è¦æç¤º

ç”±äºå®Œæ•´é¡¹ç›®ä»£ç é‡å·¨å¤§ (é¢„è®¡ 20000+ è¡Œä»£ç ),å»ºè®®:

1. **åˆ†æ¨¡å—å¼€å‘**: å…ˆå®ç°æ ¸å¿ƒæ¨¡å— (ç™»å½•ã€å®¢æˆ·ç®¡ç†),å†æ‰©å±•å…¶ä»–åŠŸèƒ½
2. **ä»£ç å¤ç”¨**: å‚è€ƒå·²æœ‰ç»„ä»¶å’Œæ¨¡å—,éµå¾ªç»Ÿä¸€çš„ä»£ç è§„èŒƒ
3. **æµ‹è¯•é©±åŠ¨**: æ¯å®Œæˆä¸€ä¸ªæ¨¡å—ç«‹å³æµ‹è¯•,ç¡®ä¿åŠŸèƒ½æ­£å¸¸
4. **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨ Git ç®¡ç†ä»£ç ,åŠæ—¶æäº¤é‡è¦å˜æ›´

---

**å¦‚éœ€è·å–å®Œæ•´æºä»£ç ,è¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…æˆ–è®¿é—®é¡¹ç›®ä»“åº“ã€‚**
